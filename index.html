<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PCä¿®ç†åº—é ­å¯¾å¿œåˆ¤å®šãƒ„ãƒ¼ãƒ«</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --brand:#004c99;          /* ãƒã‚¸ãƒãƒ–ãƒ«ãƒ¼ */
    --brand-dark:#00396f;
    --accent:#007bff;
    --bg:#f5f7fb;
    --text:#1b1f24;
    --muted:#505a66;
    --card:#ffffff;
    --border:#e3e7ef;
    --ok:#16a34a;
    --warn:#f59e0b;
    --ng:#ef4444;
    --info:#3b82f6;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:linear-gradient(180deg,#f7fbff 0%, #eef3fa 100%);
    color:var(--text);
    font-family:"Noto Sans JP","Roboto",system-ui,-apple-system,Segoe UI,Helvetica,Arial,sans-serif;
  }
  /* Header */
  .site-header{
    position:sticky; top:0; z-index:100;
    background:linear-gradient(90deg,var(--brand),var(--brand-dark));
    color:#fff; padding:14px 20px; box-shadow:0 4px 16px rgba(0,0,0,.08);
  }
  .site-header .title{font-size:20px; font-weight:700; letter-spacing:.02em}
  .site-header .subtitle{opacity:.9; font-size:12px; margin-top:2px}
  /* Container */
  .container{max-width:980px; margin:28px auto; padding:0 16px}
  /* Card */
  .card{
    background:var(--card); border:1px solid var(--border); border-radius:16px;
    box-shadow:0 6px 20px rgba(0,0,0,.06); padding:18px; margin-bottom:18px;
  }
  .section{margin-top:8px}
  .section h3{
    display:flex; align-items:center; gap:10px;
    font-size:16px; margin:4px 0 10px 0; color:var(--muted); font-weight:700;
    letter-spacing:.02em;
  }
  .chip{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid var(--border); background:#fbfdff}
  .chip i{font-style:normal; font-size:14px}
  /* Buttons */
  .btn{
    display:inline-flex; align-items:center; justify-content:center; gap:8px;
    padding:12px 14px; min-width:140px;
    border:1px solid #cdd6e6; border-radius:12px; cursor:pointer; margin:8px 8px 0 0;
    background:linear-gradient(180deg,#ffffff 0%, #f3f6fb 100%);
    font-weight:600; color:#0f172a; transition:.18s ease;
    box-shadow:0 2px 6px rgba(2,6,23,.04);
  }
  .btn:hover{transform:translateY(-1px); box-shadow:0 8px 20px rgba(2,6,23,.08);}
  .btn:active{transform:translateY(0)}
  .btn.primary{
    border-color:#a8c6ff;
    background:linear-gradient(180deg,#e9f2ff 0%, #dbe9ff 100%);
  }
  .btn.dom{}
  .btn.ovr{}
  .btn.apple{}
  .btn.surface{}
  /* Path */
  .path{font-size:12px;color:var(--muted);margin-bottom:10px}
  /* Result blocks */
  .result{border:1px solid var(--border); border-radius:14px; padding:16px; background:#fcfffd}
  .result h2{margin:0 0 8px 0; font-size:18px}
  .result ul{margin:0; padding-left:18px}
  .result.ok{border-left:4px solid var(--ok)}
  .result.warn{border-left:4px solid var(--warn)}
  .result.ng{border-left:4px solid var(--ng)}
  .result.info{border-left:4px solid var(--info)}
  /* Controls */
  .controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
  .ghost{
    background:#fff; border:1px dashed var(--border); color:var(--muted);
  }
  /* Footer note */
  .note{font-size:12px;color:var(--muted);margin-top:8px}
</style>
</head>
<body>
<header class="site-header">
  <div class="title">PCä¿®ç†åº—é ­å¯¾å¿œåˆ¤å®šãƒ„ãƒ¼ãƒ«</div>
  <div class="subtitle">ãƒã‚¸ãƒåº—é ­ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è£œåŠ© â€” ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ä¿è¨¼ç¨®åˆ¥ã«å¿œã˜ãŸæ¡ˆå†…ã‚’å³æ™‚è¡¨ç¤º</div>
</header>

<main class="container">
  <div class="card">
    <div class="path" id="path">é€²è¡Œ: ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ</div>
    <div id="content">èª­ã¿è¾¼ã¿ä¸­â€¦</div>
    <div class="controls">
      <button class="btn ghost" id="backBtn" style="display:none">â† ã²ã¨ã¤æˆ»ã‚‹</button>
      <button class="btn primary" id="resetBtn">æœ€åˆã‹ã‚‰</button>
    </div>
  </div>
</main>

<script>
// ====== ãƒã‚¹ã‚¿ãƒ¼è¨­å®šï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼ & ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰ ======
const ALL_BRANDS = ["NEC","Fujitsu","Lenovo","Surface","Dell","ASUS","Dynabook","MSI","VAIO","Mouse Computer","Apple"];
const DOMESTIC_SET = new Set(["NEC","Fujitsu","Dynabook","VAIO","Mouse Computer"]);
const OVERSEAS_SET = new Set(["ASUS","Dell","Lenovo","MSI"]);         // Surfaceã¯é™¤å¤–ï¼ˆç‹¬ç«‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
const SURFACE_SET = new Set(["Surface"]);
const APPLE_SET = new Set(["Apple"]);

// ã‹ãªèª­ã¿ï¼ˆ50éŸ³ã‚½ãƒ¼ãƒˆç”¨ï¼‰
const KANA = {
  "NEC":"ã‚¨ãƒŒã‚¤ãƒ¼ã‚·ãƒ¼",
  "Fujitsu":"ãƒ•ã‚¸ãƒ„ã‚¦",
  "Lenovo":"ãƒ¬ãƒãƒœ",
  "Surface":"ã‚µãƒ¼ãƒ•ã‚§ã‚¹",
  "Dell":"ãƒ‡ãƒ«",
  "ASUS":"ã‚¨ã‚¤ã‚¹ãƒ¼ã‚¹",
  "Dynabook":"ãƒ€ã‚¤ãƒŠãƒ–ãƒƒã‚¯",
  "MSI":"ã‚¨ãƒ ã‚¨ã‚¹ã‚¢ã‚¤",
  "VAIO":"ãƒã‚¤ã‚ª",
  "Mouse Computer":"ãƒã‚¦ã‚¹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼",
  "Apple":"ã‚¢ãƒƒãƒ—ãƒ«"
};

const FLOW = { start: "ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ", nodes: {} };

// ====== å›½å†…ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ ======
function buildDomestic(b){
  FLOW.nodes[`${b}_first`] = {
    type: "choice",
    question: `[${b}] ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ`,
    options: [
      { label: "ã¯ã„", next: `${b}_warranty_yes_notice` },
      { label: "ã„ã„ãˆ", next: `${b}_nojimaWarranty` }
    ]
  };
  FLOW.nodes[`${b}_warranty_yes_notice`] = {
    type: "result", tone: "info",
    title: `[${b}] ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼å†…ã®å—ä»˜ï¼ˆæ³¨æ„äº‹é …ã‚ã‚Šï¼‰`,
    details: [
      "ãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼å†…ã¨ã—ã¦å—ä»˜ã—ã¾ã™ã€‚",
      "ãƒ»ãŸã ã—ã€ç—‡çŠ¶ãŒæœªå†ç¾ã®å ´åˆã‚„ãŠå®¢æ§˜éƒ½åˆã®ä¿®ç†ä¸­æ­¢æ™‚ã«ã¯ã€è¦‹ç©ã‚‚ã‚Šæ‰‹æ•°æ–™ãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",
      "ãƒ»ãã®æ—¨ã‚’ãŠä¼ãˆã®ã†ãˆã€å—ä»˜ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚"
    ]
  };
  FLOW.nodes[`${b}_nojimaWarranty`] = {
    type: "choice",
    question: `[${b}] ãƒã‚¸ãƒã®ä¿è¨¼ã«å…¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ`,
    options: [
      { label: "ã¯ã„", next: `${b}_nojima_yes_store_ok` },
      { label: "ã„ã„ãˆ", next: `${b}_prepay_accept2` }
    ]
  };
  FLOW.nodes[`${b}_nojima_yes_store_ok`] = {
    type: "result", tone: "ok",
    title: `[${b}] åº—èˆ—ã§ã®ä¿®ç†å—ä»˜ï¼šå¯èƒ½ï¼ˆãƒã‚¸ãƒä¿è¨¼ï¼‰`,
    details: [
      "ãƒ»åº—èˆ—ã§ã®ä¿®ç†å—ä»˜ã¯å¯èƒ½ã§ã™ã€‚",
      "ãƒ»ä¿è¨¼å¯¾è±¡å¤–ã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹æ—¨ã‚’ãŠä¼ãˆã—ã¤ã¤ã€å—ä»˜ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚",
      "ãƒ»å‰å—ã‘é‡‘ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚"
    ]
  };
  FLOW.nodes[`${b}_prepay_accept2`] = {
    type: "result", tone: "warn",
    title: `[${b}] ä¿®ç†å—ä»˜ã¯å¯èƒ½ï¼ˆå‰å—ã‘é‡‘ï¼‰`,
    details: [
      "ãƒ»å‰å—ã‘é‡‘5,500å††ï¼ˆç¾é‡‘ã®ã¿ï¼‰ã‚’ã„ãŸã ã„ã¦ä¿®ç†å—ä»˜å¯èƒ½ã§ã™ã€‚"
    ]
  };
}

// ====== æµ·å¤–ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ ======
function buildOverseas(b){
  FLOW.nodes[`${b}_first`] = {
    type: "choice",
    question: `[${b}] ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ`,
    options: [
      { label: "ã¯ã„", next: `${b}_nojimaWarranty` },
      { label: "ã„ã„ãˆ", next: `${b}_warn_cost` }
    ]
  };
  FLOW.nodes[`${b}_warn_cost`] = {
    type: "result", tone: "warn",
    title: `[${b}] ä¿®ç†å—ä»˜å¯èƒ½ï¼ˆæ³¨æ„å–šèµ·ï¼‰`,
    details: [
      "ãƒ»ãƒã‚¸ãƒã§ã®ä¿®ç†å—ä»˜ã¯å¯èƒ½ã§ã™ã€‚",
      "ãƒ»ãŸã ã—ã€ãƒ¡ãƒ¼ã‚«ãƒ¼ã¸ç›´æ¥ä¾é ¼ã™ã‚‹ã‚ˆã‚Šä¿®ç†é‡‘é¡ãŒé«˜é¡ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",
      "ãƒ»ãŠå®¢æ§˜ã«ã”èª¬æ˜ã®ã†ãˆã€ã”åˆ¤æ–­ã‚’å°Šé‡ã—ã¦ãã ã•ã„ã€‚"
    ]
  };
  FLOW.nodes[`${b}_nojimaWarranty`] = {
    type: "choice",
    question: `[${b}] ãƒã‚¸ãƒã®ä¿è¨¼ã«å…¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ`,
    options: [
      { label: "ã¯ã„", next: `${b}_store_ok` },
      { label: "ã„ã„ãˆ", next: `${b}_warn_cost` }
    ]
  };
  FLOW.nodes[`${b}_store_ok`] = {
    type: "result", tone: "ok",
    title: `[${b}] åº—èˆ—ã§ã®ä¿®ç†å—ä»˜ï¼šå¯¾å¿œå¯èƒ½`,
    details: [
      "ãƒ»ãƒã‚¸ãƒä¿è¨¼åŠ å…¥ã®ãŸã‚ã€åº—èˆ—ã§ä¿®ç†å—ä»˜ãŒå¯èƒ½ã§ã™ã€‚",
      "ãƒ»è¦ç´„ã¨å¿…è¦æ›¸é¡ã‚’ç¢ºèªã®ã†ãˆã€å—ä»˜æ‰‹ç¶šãã‚’é€²ã‚ã¦ãã ã•ã„ã€‚"
    ]
  };
}

// ====== Surfaceï¼ˆç‹¬ç«‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»å³çµæœï¼‰ ======
function buildSurface(){
  const b = "Surface";
  FLOW.nodes[`${b}_first`] = {
    type: "result", tone: "ng",
    title: `[${b}] åº—èˆ—ä¿®ç†å—ä»˜ä¸å¯`,
    details: [
      "ãƒ»å½“åº—ã§ã®ä¿®ç†å—ä»˜ã¯ã§ãã¾ã›ã‚“ã€‚",
      "ãƒ»ãŠå®¢æ§˜ã¨ãƒ¡ãƒ¼ã‚«ãƒ¼ã§ç›´æ¥ã‚„ã‚Šå–ã‚Šã«ãªã‚Šã¾ã™ã€‚"
    ]
  };
}

// ====== Appleï¼ˆç‹¬ç«‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒã‚¸ãƒä¿è¨¼ 3æŠï¼‰ ======
function buildApple(){
  const b="Apple";
  FLOW.nodes[`${b}_first`] = {
    type: "choice",
    question: `[${b}] ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼ã«åŠ å…¥ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ`,
    options: [
      { label: "ã¯ã„", next: `${b}_apple_direct` },
      { label: "ã„ã„ãˆ", next: `${b}_nojimaType` }
    ]
  };
  FLOW.nodes[`${b}_apple_direct`] = {
    type: "result", tone: "ng",
    title: `[${b}] åº—é ­å—ä»˜ä¸å¯ï¼ˆAppleã¸ç›´æ¥æ¡ˆå†…ï¼‰`,
    details: [
      "ãƒ»ãƒã‚¸ãƒåº—é ­ã§ã®ä¿®ç†å—ä»˜ã¯ã§ãã¾ã›ã‚“ã€‚",
      "ãƒ»Appleã¨ãŠå®¢æ§˜ã§ç›´æ¥ã®ä¿®ç†å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
    ]
  };
  FLOW.nodes[`${b}_nojimaType`] = {
    type: "choice",
    question: `[${b}] ãƒã‚¸ãƒä¿è¨¼ã®ã”åŠ å…¥çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„`,
    options: [
      { label: "â‘  ã‚¢ãƒ«ãƒ†ã‚£ãƒ¡ãƒƒãƒˆä¿è¨¼ã«åŠ å…¥ã—ã¦ã„ã‚‹", next: `${b}_ultimate_result` },
      { label: "â‘¡ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¿è¨¼ãƒ—ãƒ©ã‚¹ã«åŠ å…¥ã—ã¦ã„ã‚‹", next: `${b}_after_20230601` },
      { label: "â‘¢ ä¿è¨¼ã«å…¥ã£ã¦ã„ãªã„", next: `${b}_apple_direct2` }
    ]
  };
  FLOW.nodes[`${b}_ultimate_result`] = {
    type: "result", tone: "ok",
    title: `[${b}] åº—èˆ—ã§ã®å•†å“äº¤æ›ãƒ»ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯å¯¾å¿œï¼ˆã‚¢ãƒ«ãƒ†ã‚£ãƒ¡ãƒƒãƒˆä¿è¨¼ï¼‰`,
    details: [
      "ãƒ»åº—èˆ—ã§ã®å•†å“äº¤æ›ã¾ãŸã¯ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯å¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚",
      "ãƒ»ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ç¢ºèªã—ãªãŒã‚‰å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
    ]
  };
  FLOW.nodes[`${b}_after_20230601`] = {
    type: "choice",
    question: `[${b}] 2023å¹´6æœˆ1æ—¥ä»¥é™ã«è³¼å…¥ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ`,
    options: [
      { label: "ã¯ã„", next: `${b}_pb_only` },
      { label: "ã„ã„ãˆ", next: `${b}_pre_20230601_flow` }
    ]
  };
  FLOW.nodes[`${b}_pb_only`] = {
    type: "result", tone: "warn",
    title: `[${b}] ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯ã§ã®å¯¾å¿œï¼ˆä¿®ç†ä¸å¯ï¼‰`,
    details: [
      "ãƒ»å®šå‹ä¿®ç†å—ä»˜å…ˆã¨ã®å–å¼•çµ‚äº†ã«ã‚ˆã‚Šã€ä¿®ç†ã§ã®å¯¾å¿œã¯ã§ãã¾ã›ã‚“ã€‚",
      "ãƒ»ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯ã§ã®å¯¾å¿œã¨ãªã‚Šã¾ã™ã€‚",
      "ãƒ»ãŸã ã—ã€è‡ªç„¶æ•…éšœãƒ»ç‰©æã®å ´åˆã§ãƒ•ãƒ­ãƒ¼ãŒç•°ãªã‚Šã¾ã™ã€‚ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ã”å‚ç…§ãã ã•ã„ã€‚"
    ]
  };
  FLOW.nodes[`${b}_pre_20230601_flow`] = {
    type: "result", tone: "info",
    title: `[${b}] åº—é ­ä¿®ç†å—ä»˜ï¼ˆãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯å¯¾å¿œï¼‰`,
    details: [
      "ãƒ»åº—é ­ã§ã®ä¿®ç†å—ä»˜ã®ãƒ•ãƒ­ãƒ¼ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚",
      "ãƒ»Appleç”¨ã®è£½å“ä¿®ç†ç”³è¾¼æ›¸ã‚’è¨˜è¼‰ã®ä¸Šã€ä¿®ç†å—ä»˜ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",
      "ãƒ»çµæœã¨ã—ã¦ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯ã§ã®å¯¾å¿œã¨ãªã‚Šã¾ã™ã€‚",
      "ãƒ»ãŸã ã—ã€è‡ªç„¶æ•…éšœãƒ»ç‰©æã®å ´åˆã§è‹¥å¹²ãƒ•ãƒ­ãƒ¼ãŒå¤‰ã‚ã‚Šã¾ã™ã®ã§ã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®ç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
    ]
  };
  FLOW.nodes[`${b}_apple_direct2`] = {
    type: "result", tone: "info",
    title: `[${b}] Appleã§ã®ç›´æ¥ä¿®ç†ã‚’ã”æ¡ˆå†…ï¼ˆæœªåŠ å…¥ï¼‰`,
    details: [
      "ãƒ»ãƒã‚¸ãƒä¿è¨¼ã«æœªåŠ å…¥ã®ãŸã‚ã€Appleã§ã®ç›´æ¥ä¿®ç†ã‚’ã”æ¡ˆå†…ãã ã•ã„ã€‚"
    ]
  };
}

// ====== æ§‹ç¯‰ ======
for(const b of ALL_BRANDS){
  if (DOMESTIC_SET.has(b)) buildDomestic(b);
  else if (OVERSEAS_SET.has(b)) buildOverseas(b);
}
buildSurface();
buildApple();

// ====== æç”»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ======
const state={history:[],current:FLOW.start};

function kanaKey(label){ return (KANA[label]||label); }
function getSortedGroups(){
  const domestic = ALL_BRANDS.filter(b=>DOMESTIC_SET.has(b)).sort((a,b)=>kanaKey(a).localeCompare(kanaKey(b),'ja'));
  const overseas = ALL_BRANDS.filter(b=>OVERSEAS_SET.has(b)).sort((a,b)=>kanaKey(a).localeCompare(kanaKey(b),'ja'));
  const surface = ALL_BRANDS.filter(b=>SURFACE_SET.has(b));
  const apple = ALL_BRANDS.filter(b=>APPLE_SET.has(b));
  return {domestic,overseas,surface,apple};
}

function section(title, key, brands, btnClass){
  const wrap=document.createElement('div'); wrap.className=`section card ${key}`;
  const h=document.createElement('h3');
  const chip=document.createElement('span'); chip.className='chip';
  chip.innerHTML = key==='dom' ? '<i>ğŸ¯</i>å›½å†…ãƒ¡ãƒ¼ã‚«ãƒ¼' :
                   key==='ovr' ? '<i>âœˆï¸</i>æµ·å¤–ãƒ¡ãƒ¼ã‚«ãƒ¼' :
                   key==='surface' ? '<i>ğŸªŸ</i>Surface' :
                   '<i>ğŸ</i>Apple';
  h.appendChild(chip); wrap.appendChild(h);
  brands.forEach(name=>{
    const b=document.createElement('button'); b.className=`btn ${btnClass}`; b.textContent=name;
    b.onclick=()=>{ state.history.push({node:state.current,choice:name}); state.current=`${name}_first`; render(); };
    wrap.appendChild(b);
  });
  return wrap;
}

function renderStart(){
  const content=document.getElementById('content'); content.innerHTML="";
  const {domestic,overseas,surface,apple}=getSortedGroups();
  content.appendChild(section("å›½å†…ãƒ¡ãƒ¼ã‚«ãƒ¼","dom",domestic,"dom"));
  content.appendChild(section("æµ·å¤–ãƒ¡ãƒ¼ã‚«ãƒ¼","ovr",overseas,"ovr"));
  content.appendChild(section("Surface","surface",surface,"surface"));
  content.appendChild(section("Apple","apple",apple,"apple"));
  const note=document.createElement('div'); note.className='note';
  note.textContent="â€» Surfaceã¯é¸æŠç›´å¾Œã«ã€Œåº—èˆ—ä¿®ç†å—ä»˜ä¸å¯ï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼ã¨ç›´æ¥ã‚„ã‚Šå–ã‚Šï¼‰ã€ã®çµæœã‚’è¡¨ç¤ºã—ã¾ã™ã€‚";
  content.appendChild(note);
}

function renderPath(){
  const path=["ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ",...state.history.map(h=>h.choice||h.node)];
  document.getElementById('path').textContent="é€²è¡Œ: "+path.join(" > ");
}

function render(){
  renderPath();
  const node=FLOW.nodes[state.current];
  const content=document.getElementById('content');
  if (state.current===FLOW.start){
    renderStart();
    document.getElementById('backBtn').style.display=state.history.length?"inline-block":"none";
    return;
  }
  content.innerHTML="";
  if(!node){ content.textContent="è¨­å®šã‚¨ãƒ©ãƒ¼ï¼šãƒãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ - "+state.current; return; }
  if(node.type==="choice"){
    const q=document.createElement('h2'); q.textContent=node.question||"é¸æŠã—ã¦ãã ã•ã„"; content.appendChild(q);
    (node.options||[]).forEach(opt=>{
      const b=document.createElement('button'); b.className="btn primary"; b.textContent=opt.label;
      b.onclick=()=>{ state.history.push({node:state.current,choice:opt.label}); state.current=opt.next; render(); };
      content.appendChild(b);
    });
    const note=document.createElement('div'); note.className="note"; note.textContent="â€»ã€Œâ† ã²ã¨ã¤æˆ»ã‚‹ã€ã§å‰ã®è³ªå•ã«æˆ»ã‚Œã¾ã™"; content.appendChild(note);
  }else{
    const wrap=document.createElement('div'); wrap.className=`result ${node.tone||'info'}`;
    const h=document.createElement('h2'); h.textContent=node.title||"çµæœ"; wrap.appendChild(h);
    const ul=document.createElement('ul'); (node.details||[]).forEach(t=>{ const li=document.createElement('li'); li.textContent=t; ul.appendChild(li); });
    wrap.appendChild(ul); content.appendChild(wrap);
  }
  document.getElementById('backBtn').style.display=state.history.length?"inline-block":"none";
}

document.getElementById('resetBtn').onclick=()=>{ state.history=[]; state.current=FLOW.start; render(); };
document.getElementById('backBtn').onclick=()=>{ if(!state.history.length) return; const last=state.history.pop(); state.current=last.node; render(); };
render();
</script>
</body>
</html>
